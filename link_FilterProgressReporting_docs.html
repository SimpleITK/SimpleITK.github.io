

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Filter Progress Reporting &mdash; SimpleITK 1.2.0.dev documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript" src="_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.js"></script>
        <script type="text/javascript" src="_static/sphinx_tabs/tabs.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/sphinx_tabs/semantic-ui-2.4.1/segment.min.css" type="text/css" />
  <link rel="stylesheet" href="_static/sphinx_tabs/semantic-ui-2.4.1/menu.min.css" type="text/css" />
  <link rel="stylesheet" href="_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.css" type="text/css" />
  <link rel="stylesheet" href="_static/sphinx_tabs/tabs.css" type="text/css" />
  <link rel="stylesheet" href="_static/style.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Image Grid Manipulation" href="link_ImageGridManipulation_docs.html" />
    <link rel="prev" title="Fast Marching Segmentation" href="link_FastMarchingSegmentation_docs.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> SimpleITK
          

          
            
            <img src="_static/simpleitk_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="fundamentalConcepts.html">Fundamental Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="registrationOverview.html">Registration Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="conventions.html">Common Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="IO.html">Reading and Writing for Images and Transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="filters.html">SimpleITK Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="building.html">Building SimpleITK</a></li>
<li class="toctree-l1"><a class="reference internal" href="setUp.html">Setting Up Eclipse and Visual Studio</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorialsAndCourses.html">Tutorials and Courses</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="FilterTemplates.html">Developer</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="link_examples.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="link_HelloWorld_docs.html">Hello World</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_CSharp_docs.html">CSharp Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_DemonsRegistration1_docs.html">DemonsRegistration1</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_DemonsRegistration2_docs.html">DemonsRegistration2</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_DicomImagePrintTags_docs.html">Read Image Meta-Data Dictionary and Print</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_DicomSeriesReader_docs.html">Dicom Series Reader</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_DicomSeriesReadModifyWrite_docs.html">Dicom Series Read Modify Write</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_DicomSeriesFromArray_docs.html">Dicom Series From Array</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_FastMarchingSegmentation_docs.html">Fast Marching Segmentation</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Filter Progress Reporting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#events">Events</a></li>
<li class="toctree-l3"><a class="reference internal" href="#commands">Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="#command-directors-for-wrapped-languages">Command Directors for Wrapped Languages</a></li>
<li class="toctree-l3"><a class="reference internal" href="#command-functions-and-lambdas-for-wrapped-languages">Command Functions and Lambdas for Wrapped Languages</a></li>
<li class="toctree-l3"><a class="reference internal" href="#code">Code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="link_ImageGridManipulation_docs.html">Image Grid Manipulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_ImageRegistrationMethod1_docs.html">Image Registration Method 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_ImageRegistrationMethod2_docs.html">Image Registration Method 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_ImageRegistrationMethod3_docs.html">Image Registration Method 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_ImageRegistrationMethod4_docs.html">Image Registration Method 4</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_ImageRegistrationMethodBSpline1_docs.html">Image Registration Method BSpline 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_ImageRegistrationMethodBSpline2_docs.html">Image Registration Method BSpline 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_ImageRegistrationMethodBSpline3_docs.html">Image Registration Method BSpline 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_ImageRegistrationMethodDisplacement1_docs.html">Image Registration Method Displacement 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_ImageRegistrationMethodExhaustive_docs.html">Image Registration Method Exhaustive</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_ITKIntegration_docs.html">Integration with ITK</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_N4BiasFieldCorrection_docs.html">N4 Bias Field Correction</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_SimpleGaussian_docs.html">Reading-Gaussian Blurring-Writing</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_ImageViewing_docs.html">Image Viewing</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_AdvancedImageReading_docs.html">Advanced Image Reading</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_ImageIOSelection_docs.html">IO Selection for Image Reading</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SimpleITK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="link_examples.html">Examples</a> &raquo;</li>
        
      <li>Filter Progress Reporting</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/link_FilterProgressReporting_docs.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="filter-progress-reporting">
<span id="lbl-filter-progress-reporting"></span><h1>Filter Progress Reporting<a class="headerlink" href="#filter-progress-reporting" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>SimpleITK has the ability to add commands or callbacks as observers of
events that may occur during data processing. This feature can be used to add
progress reporting to a console, to monitor the process of optimization,
to abort a process, or to improve the integration of
SimpleITK into Graphical User Interface event queues.</p>
</div>
<div class="section" id="events">
<h2>Events<a class="headerlink" href="#events" title="Permalink to this headline">¶</a></h2>
<p>Events are a simple enumerated type in SimpleITK, represented by
the <a class="reference external" href="https://itk.org/SimpleITKDoxygen/html/namespaceitk_1_1simple.html#aa7399868984d99493c5a307cce373ace">EventEnum type</a>.
More information about each event type can be found in the documentation
for the enum. All SimpleITK filters, including the reading
and writing ones, are derived from the ProcessObject class which has
support for events. SimpleITK utilizes the native ITK event system
but has simpler events and methods to add an observer or commands. The goal
is to provide a simpler interface more suitable for scripting
languages.</p>
</div>
<div class="section" id="commands">
<h2>Commands<a class="headerlink" href="#commands" title="Permalink to this headline">¶</a></h2>
<p>The command design pattern is used to allow user code to be executed
when an event occurs. It is encapsulated in the Command class. The
Command class provides a virtual Execute method to be overridden in
derived classes. Additionally, SimpleITK provides internal reference
tracking between the ProcessObject and the Command. This reference tracking
allows an object to be created on the stack or dynamically allocated, without
additional burden.</p>
</div>
<div class="section" id="command-directors-for-wrapped-languages">
<h2>Command Directors for Wrapped Languages<a class="headerlink" href="#command-directors-for-wrapped-languages" title="Permalink to this headline">¶</a></h2>
<p>SimpleITK uses SWIG’s director feature to enable wrapped languages to
derive classes from the Command class.  Thus a user may  override the
Command class’s Execute method for custom call-backs. The following
languages support deriving classes from the Command class:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-QyM= docutils container">
<div class="docutils container">
C#</div>
</div>
<div class="item sphinx-data-tab-SmF2YQ== docutils container">
<div class="docutils container">
Java</div>
</div>
<div class="item sphinx-data-tab-UHl0aG9u docutils container">
<div class="docutils container">
Python</div>
</div>
<div class="item sphinx-data-tab-UnVieQ== docutils container">
<div class="docutils container">
Ruby</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-QyM= active docutils container">
<div class="highlight-c# notranslate"><div class="highlight"><pre><span></span>  <span class="k">class</span> <span class="nc">MyCommand</span> <span class="p">:</span> <span class="n">Command</span> <span class="p">{</span>

    <span class="k">private</span> <span class="n">ProcessObject</span> <span class="n">m_ProcessObject</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">MyCommand</span><span class="p">(</span><span class="n">ProcessObject</span> <span class="n">po</span><span class="p">){</span>
      <span class="n">m_ProcessObject</span> <span class="p">=</span> <span class="n">po</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Execute</span><span class="p">()</span> <span class="p">{</span>
      <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;{0} Progress: {1:0.00}&quot;</span><span class="p">,</span> <span class="n">m_ProcessObject</span><span class="p">.</span><span class="n">GetName</span><span class="p">(),</span> <span class="n">m_ProcessObject</span><span class="p">.</span><span class="n">GetProgress</span><span class="p">()</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-SmF2YQ== docutils container">
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">MyCommand</span>  <span class="kd">extends</span> <span class="n">Command</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="n">ProcessObject</span> <span class="n">m_ProcessObject</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">MyCommand</span><span class="o">(</span><span class="n">ProcessObject</span> <span class="n">po</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">();</span>
    <span class="n">m_ProcessObject</span><span class="o">=</span><span class="n">po</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">execute</span><span class="o">()</span> <span class="o">{</span>
    <span class="kt">double</span> <span class="n">progress</span> <span class="o">=</span> <span class="n">m_ProcessObject</span><span class="o">.</span><span class="na">getProgress</span><span class="o">();</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;%s Progress: %f\n&quot;</span><span class="o">,</span> <span class="n">m_ProcessObject</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">progress</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-UHl0aG9u docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyCommand</span><span class="p">(</span><span class="n">sitk</span><span class="o">.</span><span class="n">Command</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">po</span><span class="p">):</span>
        <span class="c1"># required</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">MyCommand</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">processObject</span> <span class="o">=</span> <span class="n">po</span>

    <span class="k">def</span> <span class="nf">Execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;{0} Progress: {1:1.2f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processObject</span><span class="o">.</span><span class="n">GetName</span><span class="p">(),</span><span class="bp">self</span><span class="o">.</span><span class="n">processObject</span><span class="o">.</span><span class="n">GetProgress</span><span class="p">()))</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-UnVieQ== docutils container">
<div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyCommand</span> <span class="o">&lt;</span> <span class="no">Simpleitk</span><span class="o">::</span><span class="no">Command</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">po</span><span class="p">)</span>
    <span class="c1"># Explicit call to supoer class initlaizer is required to</span>
    <span class="c1"># initialize the SWIG director class to enable overloaded methods</span>
    <span class="k">super</span><span class="p">()</span>
    <span class="vi">@po</span> <span class="o">=</span> <span class="n">po</span>
  <span class="k">end</span>

  <span class="c1"># The Command method to be executed on the event from the filter.</span>
  <span class="k">def</span> <span class="nf">execute</span>
    <span class="nb">puts</span> <span class="s2">&quot;%s Progress: %0.2f&quot;</span> <span class="o">%</span> <span class="o">[</span><span class="vi">@po</span><span class="o">.</span><span class="n">get_name</span><span class="p">,</span> <span class="vi">@po</span><span class="o">.</span><span class="n">get_progress</span><span class="o">]</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="command-functions-and-lambdas-for-wrapped-languages">
<h2>Command Functions and Lambdas for Wrapped Languages<a class="headerlink" href="#command-functions-and-lambdas-for-wrapped-languages" title="Permalink to this headline">¶</a></h2>
<p>Not all scripting languages are naturally object oriented, and it is
often easier to simply define a callback inline with a lambda
function. The following language supports inline function definitions
for functions for the ProcessObject::AddCommand method:</p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-UHl0aG9u docutils container">
<div class="docutils container">
Python</div>
</div>
<div class="item sphinx-data-tab-Ug== docutils container">
<div class="docutils container">
R</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-UHl0aG9u active docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gaussian</span><span class="o">.</span><span class="n">AddCommand</span><span class="p">(</span><span class="n">sitk</span><span class="o">.</span><span class="n">sitkStartEvent</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="k">print</span><span class="p">(</span><span class="s2">&quot;StartEvent&quot;</span><span class="p">))</span>
<span class="n">gaussian</span><span class="o">.</span><span class="n">AddCommand</span><span class="p">(</span><span class="n">sitk</span><span class="o">.</span><span class="n">sitkEndEvent</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="k">print</span><span class="p">(</span><span class="s2">&quot;EndEvent&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-Ug== docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">gaussian</span><span class="o">$</span><span class="nf">AddCommand</span><span class="p">(</span> <span class="s">&#39;sitkStartEvent&#39;</span><span class="p">,</span>  <span class="nf">function</span><span class="p">(</span><span class="n">method</span><span class="p">)</span> <span class="p">{</span><span class="nf">cat</span><span class="p">(</span><span class="s">&quot;StartEvent\n&quot;</span><span class="p">)}</span> <span class="p">)</span>
<span class="n">gaussian</span><span class="o">$</span><span class="nf">AddCommand</span><span class="p">(</span> <span class="s">&#39;sitkEndEvent&#39;</span><span class="p">,</span>  <span class="nf">function</span><span class="p">(</span><span class="n">method</span><span class="p">)</span> <span class="p">{</span><span class="nf">cat</span><span class="p">(</span><span class="s">&quot;EndEvent\n&quot;</span><span class="p">)}</span> <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="code">
<h2>Code<a class="headerlink" href="#code" title="Permalink to this headline">¶</a></h2>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-Q1NoYXJw docutils container">
<div class="docutils container">
CSharp</div>
</div>
<div class="item sphinx-data-tab-Qysr docutils container">
<div class="docutils container">
C++</div>
</div>
<div class="item sphinx-data-tab-SmF2YQ== docutils container">
<div class="docutils container">
Java</div>
</div>
<div class="item sphinx-data-tab-UHl0aG9u docutils container">
<div class="docutils container">
Python</div>
</div>
<div class="item sphinx-data-tab-Ug== docutils container">
<div class="docutils container">
R</div>
</div>
<div class="item sphinx-data-tab-UnVieQ== docutils container">
<div class="docutils container">
Ruby</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-Q1NoYXJw active docutils container">
<div class="highlight-c# notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">itk.simple</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">itk.simple.examples</span> <span class="p">{</span>

<span class="c1">//! [csharp director command]</span>
  <span class="k">class</span> <span class="nc">MyCommand</span> <span class="p">:</span> <span class="n">Command</span> <span class="p">{</span>

    <span class="k">private</span> <span class="n">ProcessObject</span> <span class="n">m_ProcessObject</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">MyCommand</span><span class="p">(</span><span class="n">ProcessObject</span> <span class="n">po</span><span class="p">){</span>
      <span class="n">m_ProcessObject</span> <span class="p">=</span> <span class="n">po</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Execute</span><span class="p">()</span> <span class="p">{</span>
      <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;{0} Progress: {1:0.00}&quot;</span><span class="p">,</span> <span class="n">m_ProcessObject</span><span class="p">.</span><span class="n">GetName</span><span class="p">(),</span> <span class="n">m_ProcessObject</span><span class="p">.</span><span class="n">GetProgress</span><span class="p">()</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="c1">//! [csharp director command]</span>

  <span class="k">class</span> <span class="nc">FilterProgressReporting</span> <span class="p">{</span>

    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">Length</span> <span class="p">&lt;</span> <span class="m">3</span><span class="p">)</span> <span class="p">{</span>
          <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Usage: {0} &lt;input&gt; &lt;variance&gt; &lt;output&gt;&quot;</span><span class="p">,</span> <span class="n">args</span><span class="p">[</span><span class="m">0</span><span class="p">]);</span>
          <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">// Read input image</span>
        <span class="n">ImageFileReader</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ImageFileReader</span><span class="p">();</span>
        <span class="n">reader</span><span class="p">.</span><span class="n">SetFileName</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="m">0</span><span class="p">]);</span>
        <span class="n">Image</span> <span class="n">image</span> <span class="p">=</span> <span class="n">reader</span><span class="p">.</span><span class="n">Execute</span><span class="p">();</span>

        <span class="c1">// Execute Gaussian smoothing filter</span>
        <span class="n">DiscreteGaussianImageFilter</span> <span class="n">filter</span> <span class="p">=</span> <span class="k">new</span> <span class="n">DiscreteGaussianImageFilter</span><span class="p">();</span>
        <span class="n">filter</span><span class="p">.</span><span class="n">SetVariance</span><span class="p">(</span><span class="n">Double</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="m">1</span><span class="p">]));</span>

        <span class="n">MyCommand</span> <span class="n">cmd</span> <span class="p">=</span> <span class="k">new</span> <span class="n">MyCommand</span><span class="p">(</span><span class="n">filter</span><span class="p">);</span>
        <span class="n">filter</span><span class="p">.</span><span class="n">AddCommand</span><span class="p">(</span><span class="n">EventEnum</span><span class="p">.</span><span class="n">sitkProgressEvent</span><span class="p">,</span> <span class="n">cmd</span><span class="p">);</span>

        <span class="n">image</span> <span class="p">=</span> <span class="n">filter</span><span class="p">.</span><span class="n">Execute</span><span class="p">(</span><span class="n">image</span><span class="p">);</span>

        <span class="c1">// Write output image</span>
        <span class="n">ImageFileWriter</span> <span class="n">writer</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ImageFileWriter</span><span class="p">();</span>
        <span class="n">writer</span><span class="p">.</span><span class="n">SetFileName</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="m">2</span><span class="p">]);</span>
        <span class="n">writer</span><span class="p">.</span><span class="n">Execute</span><span class="p">(</span><span class="n">image</span><span class="p">);</span>

      <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">ex</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-Qysr docutils container">
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// This one header will include all SimpleITK filters and external</span>
<span class="c1">// objects.</span>
<span class="cp">#include</span> <span class="cpf">&lt;SimpleITK.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;iomanip&gt;</span><span class="cp"></span>

<span class="c1">// create convenient namespace alias</span>
<span class="k">namespace</span> <span class="n">sitk</span> <span class="o">=</span> <span class="n">itk</span><span class="o">::</span><span class="n">simple</span><span class="p">;</span>

<span class="c1">// Create A Command Callback to be registered with the ProcessObject</span>
<span class="c1">// on the ProgressEvent</span>
<span class="c1">//</span>
<span class="c1">// Internally we maintain a reference to the ProcessObject passed</span>
<span class="c1">// during construction. Therefore, it would be an error to execute the</span>
<span class="c1">// Execute method after the ProcessObject is delete. But this class</span>
<span class="c1">// can be created on the stack, with out issue.</span>
<span class="k">class</span> <span class="nc">ProgressUpdate</span>
  <span class="o">:</span> <span class="k">public</span> <span class="n">sitk</span><span class="o">::</span><span class="n">Command</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="n">ProgressUpdate</span><span class="p">(</span><span class="k">const</span> <span class="n">sitk</span><span class="o">::</span><span class="n">ProcessObject</span> <span class="o">&amp;</span><span class="n">po</span><span class="p">)</span>
    <span class="o">:</span> <span class="n">m_Process</span><span class="p">(</span><span class="n">po</span><span class="p">)</span>
    <span class="p">{}</span>

  <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Execute</span><span class="p">(</span> <span class="p">)</span>
    <span class="p">{</span>
      <span class="c1">// stash the stream state</span>
      <span class="n">std</span><span class="o">::</span><span class="n">ios</span>  <span class="n">state</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
      <span class="n">state</span><span class="p">.</span><span class="n">copyfmt</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">);</span>
      <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">fixed</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setw</span><span class="p">(</span> <span class="mi">3</span> <span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setprecision</span><span class="p">(</span> <span class="mi">2</span> <span class="p">);</span>

      <span class="c1">// Print the Progress &quot;Active Measurement&quot;</span>
      <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">m_Process</span><span class="p">.</span><span class="n">GetName</span><span class="p">()</span><span class="o">&lt;&lt;</span> <span class="s">&quot; Progress: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">m_Process</span><span class="p">.</span><span class="n">GetProgress</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

      <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">.</span><span class="n">copyfmt</span><span class="p">(</span><span class="n">state</span><span class="p">);</span>
    <span class="p">}</span>
<span class="k">private</span><span class="o">:</span>
  <span class="k">const</span> <span class="n">sitk</span><span class="o">::</span><span class="n">ProcessObject</span> <span class="o">&amp;</span><span class="n">m_Process</span><span class="p">;</span>
<span class="p">};</span>


<span class="kt">int</span> <span class="nf">main</span> <span class="p">(</span> <span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[]</span> <span class="p">)</span> <span class="p">{</span>

  <span class="k">if</span> <span class="p">(</span> <span class="n">argc</span> <span class="o">&lt;</span> <span class="mi">4</span> <span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Usage: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &lt;input&gt; &lt;variance&gt; &lt;output&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// Read the image file</span>
  <span class="n">sitk</span><span class="o">::</span><span class="n">ImageFileReader</span> <span class="n">reader</span><span class="p">;</span>
  <span class="n">reader</span><span class="p">.</span><span class="n">SetFileName</span> <span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="p">(</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="p">);</span>
  <span class="n">sitk</span><span class="o">::</span><span class="n">Image</span> <span class="n">image</span> <span class="o">=</span> <span class="n">reader</span><span class="p">.</span><span class="n">Execute</span><span class="p">();</span>

  <span class="c1">// This filters perform a gaussian bluring with sigma in physical</span>
  <span class="c1">// space. The output image will be of real type.</span>
  <span class="n">sitk</span><span class="o">::</span><span class="n">DiscreteGaussianImageFilter</span> <span class="n">gaussian</span><span class="p">;</span>
  <span class="n">gaussian</span><span class="p">.</span><span class="n">SetVariance</span> <span class="p">(</span> <span class="n">atof</span> <span class="p">(</span> <span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">)</span> <span class="p">);</span>

  <span class="c1">// Construct our custom command on the stack</span>
  <span class="n">ProgressUpdate</span> <span class="n">cmd</span><span class="p">(</span><span class="n">gaussian</span><span class="p">);</span>
  <span class="c1">// register it with the filter for the ProgressEvent</span>
  <span class="n">gaussian</span><span class="p">.</span><span class="n">AddCommand</span><span class="p">(</span> <span class="n">sitk</span><span class="o">::</span><span class="n">sitkProgressEvent</span><span class="p">,</span> <span class="n">cmd</span> <span class="p">);</span>

  <span class="n">sitk</span><span class="o">::</span><span class="n">Image</span> <span class="n">blurredImage</span> <span class="o">=</span> <span class="n">gaussian</span><span class="p">.</span><span class="n">Execute</span> <span class="p">(</span> <span class="n">image</span> <span class="p">);</span>

  <span class="c1">// Covert the real output image back to the original pixel type, to</span>
  <span class="c1">// make writing easier, as many file formats don&#39;t support real</span>
  <span class="c1">// pixels.</span>
  <span class="n">sitk</span><span class="o">::</span><span class="n">CastImageFilter</span> <span class="n">caster</span><span class="p">;</span>
  <span class="n">caster</span><span class="p">.</span><span class="n">SetOutputPixelType</span><span class="p">(</span> <span class="n">image</span><span class="p">.</span><span class="n">GetPixelID</span><span class="p">()</span> <span class="p">);</span>
  <span class="n">sitk</span><span class="o">::</span><span class="n">Image</span> <span class="n">outputImage</span> <span class="o">=</span> <span class="n">caster</span><span class="p">.</span><span class="n">Execute</span><span class="p">(</span> <span class="n">blurredImage</span> <span class="p">);</span>

  <span class="c1">// write the image</span>
  <span class="n">sitk</span><span class="o">::</span><span class="n">ImageFileWriter</span> <span class="n">writer</span><span class="p">;</span>
  <span class="n">writer</span><span class="p">.</span><span class="n">SetFileName</span> <span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="p">(</span> <span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="p">)</span> <span class="p">);</span>
  <span class="n">writer</span><span class="p">.</span><span class="n">Execute</span> <span class="p">(</span> <span class="n">outputImage</span> <span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-SmF2YQ== docutils container">
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.itk.simple.*</span><span class="o">;</span>

<span class="c1">//! [java director command]</span>
<span class="kd">class</span> <span class="nc">MyCommand</span>  <span class="kd">extends</span> <span class="n">Command</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="n">ProcessObject</span> <span class="n">m_ProcessObject</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">MyCommand</span><span class="o">(</span><span class="n">ProcessObject</span> <span class="n">po</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">();</span>
    <span class="n">m_ProcessObject</span><span class="o">=</span><span class="n">po</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">execute</span><span class="o">()</span> <span class="o">{</span>
    <span class="kt">double</span> <span class="n">progress</span> <span class="o">=</span> <span class="n">m_ProcessObject</span><span class="o">.</span><span class="na">getProgress</span><span class="o">();</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;%s Progress: %f\n&quot;</span><span class="o">,</span> <span class="n">m_ProcessObject</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">progress</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
<span class="c1">//! [java director command]</span>

<span class="kd">class</span> <span class="nc">FilterProgressReporting</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span> <span class="n">argv</span><span class="o">[])</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span> <span class="n">argv</span><span class="o">.</span><span class="na">length</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="o">)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;Usage: java %s &lt;input&gt; &lt;variance&gt; &lt;output&gt;&quot;</span><span class="o">,</span> <span class="s">&quot;FilterProgressReporting&quot;</span> <span class="o">);</span>
      <span class="n">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(-</span><span class="mi">1</span><span class="o">);</span>
    <span class="o">}</span>

      <span class="n">org</span><span class="o">.</span><span class="na">itk</span><span class="o">.</span><span class="na">simple</span><span class="o">.</span><span class="na">ImageFileReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="n">org</span><span class="o">.</span><span class="na">itk</span><span class="o">.</span><span class="na">simple</span><span class="o">.</span><span class="na">ImageFileReader</span><span class="o">();</span>
      <span class="n">reader</span><span class="o">.</span><span class="na">setFileName</span><span class="o">(</span><span class="n">argv</span><span class="o">[</span><span class="mi">0</span><span class="o">]);</span>
      <span class="n">Image</span> <span class="n">img</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

      <span class="n">DiscreteGaussianImageFilter</span> <span class="n">filter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DiscreteGaussianImageFilter</span><span class="o">();</span>
      <span class="n">filter</span><span class="o">.</span><span class="na">setVariance</span><span class="o">(</span><span class="n">Double</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span> <span class="n">argv</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">).</span><span class="na">doubleValue</span><span class="o">());</span>

      <span class="n">MyCommand</span> <span class="n">cmd</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MyCommand</span><span class="o">(</span><span class="n">filter</span><span class="o">);</span>
      <span class="n">filter</span><span class="o">.</span><span class="na">addCommand</span><span class="o">(</span><span class="n">EventEnum</span><span class="o">.</span><span class="na">sitkProgressEvent</span><span class="o">,</span> <span class="n">cmd</span><span class="o">);</span>

      <span class="n">Image</span> <span class="n">blurredImg</span> <span class="o">=</span> <span class="n">filter</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">img</span><span class="o">);</span>

      <span class="n">CastImageFilter</span> <span class="n">caster</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CastImageFilter</span><span class="o">();</span>
      <span class="n">caster</span><span class="o">.</span><span class="na">setOutputPixelType</span><span class="o">(</span><span class="n">img</span><span class="o">.</span><span class="na">getPixelID</span><span class="o">());</span>
      <span class="n">Image</span> <span class="n">castImg</span> <span class="o">=</span> <span class="n">caster</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">blurredImg</span><span class="o">);</span>

      <span class="n">ImageFileWriter</span> <span class="n">writer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ImageFileWriter</span><span class="o">();</span>
      <span class="n">writer</span><span class="o">.</span><span class="na">setFileName</span><span class="o">(</span><span class="n">argv</span><span class="o">[</span><span class="mi">2</span><span class="o">]);</span>

      <span class="n">writer</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">castImg</span><span class="o">);</span>

    <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-UHl0aG9u docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>

<span class="kn">import</span> <span class="nn">SimpleITK</span> <span class="kn">as</span> <span class="nn">sitk</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="k">if</span> <span class="nb">len</span> <span class="p">(</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="p">)</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span> <span class="s2">&quot;Usage: &quot;</span><span class="o">+</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span> <span class="s2">&quot; &lt;input&gt; &lt;variance&gt; &lt;output&gt;&quot;</span> <span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>

<span class="c1">##! [python director command]</span>
<span class="k">class</span> <span class="nc">MyCommand</span><span class="p">(</span><span class="n">sitk</span><span class="o">.</span><span class="n">Command</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">po</span><span class="p">):</span>
        <span class="c1"># required</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">MyCommand</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">processObject</span> <span class="o">=</span> <span class="n">po</span>

    <span class="k">def</span> <span class="nf">Execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;{0} Progress: {1:1.2f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processObject</span><span class="o">.</span><span class="n">GetName</span><span class="p">(),</span><span class="bp">self</span><span class="o">.</span><span class="n">processObject</span><span class="o">.</span><span class="n">GetProgress</span><span class="p">()))</span>
<span class="c1">##! [python director command]</span>

<span class="n">reader</span> <span class="o">=</span> <span class="n">sitk</span><span class="o">.</span><span class="n">ImageFileReader</span><span class="p">()</span>
<span class="n">reader</span><span class="o">.</span><span class="n">SetFileName</span> <span class="p">(</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">Execute</span><span class="p">()</span>

<span class="n">pixelID</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">GetPixelID</span><span class="p">()</span>

<span class="n">gaussian</span> <span class="o">=</span> <span class="n">sitk</span><span class="o">.</span><span class="n">DiscreteGaussianImageFilter</span><span class="p">()</span>
<span class="n">gaussian</span><span class="o">.</span><span class="n">SetVariance</span><span class="p">(</span> <span class="nb">float</span> <span class="p">(</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span>


<span class="c1">##! [python lambda command]</span>
<span class="n">gaussian</span><span class="o">.</span><span class="n">AddCommand</span><span class="p">(</span><span class="n">sitk</span><span class="o">.</span><span class="n">sitkStartEvent</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="k">print</span><span class="p">(</span><span class="s2">&quot;StartEvent&quot;</span><span class="p">))</span>
<span class="n">gaussian</span><span class="o">.</span><span class="n">AddCommand</span><span class="p">(</span><span class="n">sitk</span><span class="o">.</span><span class="n">sitkEndEvent</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="k">print</span><span class="p">(</span><span class="s2">&quot;EndEvent&quot;</span><span class="p">))</span>
<span class="c1">##! [python lambda command]</span>

<span class="n">cmd</span> <span class="o">=</span> <span class="n">MyCommand</span><span class="p">(</span><span class="n">gaussian</span><span class="p">)</span>
<span class="n">gaussian</span><span class="o">.</span><span class="n">AddCommand</span><span class="p">(</span><span class="n">sitk</span><span class="o">.</span><span class="n">sitkProgressEvent</span><span class="p">,</span> <span class="n">cmd</span><span class="p">)</span>

<span class="n">image</span> <span class="o">=</span> <span class="n">gaussian</span><span class="o">.</span><span class="n">Execute</span> <span class="p">(</span> <span class="n">image</span> <span class="p">)</span>

<span class="n">caster</span> <span class="o">=</span> <span class="n">sitk</span><span class="o">.</span><span class="n">CastImageFilter</span><span class="p">()</span>
<span class="n">caster</span><span class="o">.</span><span class="n">SetOutputPixelType</span><span class="p">(</span> <span class="n">pixelID</span> <span class="p">)</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">caster</span><span class="o">.</span><span class="n">Execute</span><span class="p">(</span> <span class="n">image</span> <span class="p">)</span>

<span class="n">writer</span> <span class="o">=</span> <span class="n">sitk</span><span class="o">.</span><span class="n">ImageFileWriter</span><span class="p">()</span>
<span class="n">writer</span><span class="o">.</span><span class="n">SetFileName</span> <span class="p">(</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="p">)</span>
<span class="n">writer</span><span class="o">.</span><span class="n">Execute</span> <span class="p">(</span> <span class="n">image</span> <span class="p">);</span>


<span class="k">if</span> <span class="p">(</span> <span class="ow">not</span> <span class="s2">&quot;SITK_NOSHOW&quot;</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span> <span class="p">):</span>
    <span class="n">sitk</span><span class="o">.</span><span class="n">Show</span><span class="p">(</span> <span class="n">image</span><span class="p">,</span> <span class="s2">&quot;Simple Gaussian&quot;</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-Ug== docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run with:</span>
<span class="c1">#</span>
<span class="c1"># Rscript --vanilla FilterProgressReporting.R input variance output</span>
<span class="c1">#</span>


<span class="nf">library</span><span class="p">(</span><span class="n">SimpleITK</span><span class="p">)</span>

<span class="n">args</span> <span class="o">&lt;-</span> <span class="nf">commandArgs</span><span class="p">(</span> <span class="kc">TRUE</span> <span class="p">)</span>

<span class="nf">if </span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&lt;</span>  <span class="m">3</span><span class="p">){</span>
   <span class="nf">write</span><span class="p">(</span><span class="s">&quot;Usage arguments: &lt;input&gt; &lt;variance&gt; &lt;output&gt;&quot;</span><span class="p">,</span> <span class="nf">stderr</span><span class="p">())</span>
   <span class="nf">quit</span><span class="p">(</span><span class="n">save</span><span class="o">=</span><span class="s">&quot;no&quot;</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="m">1</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">reader</span> <span class="o">&lt;-</span> <span class="nf">ImageFileReader</span><span class="p">()</span>
<span class="n">reader</span><span class="o">$</span><span class="nf">SetFileName</span><span class="p">(</span><span class="n">args[[1]]</span><span class="p">)</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">reader</span><span class="o">$</span><span class="nf">Execute</span><span class="p">()</span>

<span class="n">pixelID</span> <span class="o">&lt;-</span> <span class="n">image</span><span class="o">$</span><span class="nf">GetPixelID</span><span class="p">()</span>

<span class="n">gaussian</span> <span class="o">&lt;-</span> <span class="nf">DiscreteGaussianImageFilter</span><span class="p">()</span>
<span class="n">gaussian</span><span class="o">$</span><span class="nf">SetVariance</span><span class="p">(</span> <span class="nf">as.numeric</span><span class="p">(</span><span class="n">args[2]</span><span class="p">)</span> <span class="p">)</span>

<span class="c1">##! [R lambda command]</span>
<span class="n">gaussian</span><span class="o">$</span><span class="nf">AddCommand</span><span class="p">(</span> <span class="s">&#39;sitkStartEvent&#39;</span><span class="p">,</span>  <span class="nf">function</span><span class="p">(</span><span class="n">method</span><span class="p">)</span> <span class="p">{</span><span class="nf">cat</span><span class="p">(</span><span class="s">&quot;StartEvent\n&quot;</span><span class="p">)}</span> <span class="p">)</span>
<span class="n">gaussian</span><span class="o">$</span><span class="nf">AddCommand</span><span class="p">(</span> <span class="s">&#39;sitkEndEvent&#39;</span><span class="p">,</span>  <span class="nf">function</span><span class="p">(</span><span class="n">method</span><span class="p">)</span> <span class="p">{</span><span class="nf">cat</span><span class="p">(</span><span class="s">&quot;EndEvent\n&quot;</span><span class="p">)}</span> <span class="p">)</span>
<span class="c1">##! [R lambda command]</span>

<span class="n">image</span> <span class="o">=</span> <span class="n">gaussian</span><span class="o">$</span><span class="nf">Execute</span><span class="p">(</span> <span class="n">image</span> <span class="p">)</span>

<span class="n">caster</span> <span class="o">&lt;-</span> <span class="nf">CastImageFilter</span><span class="p">()</span>
<span class="n">caster</span><span class="o">$</span><span class="nf">SetOutputPixelType</span><span class="p">(</span> <span class="n">pixelID</span> <span class="p">)</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">caster</span><span class="o">$</span><span class="nf">Execute</span><span class="p">(</span> <span class="n">image</span> <span class="p">)</span>

<span class="n">writer</span> <span class="o">&lt;-</span> <span class="nf">ImageFileWriter</span><span class="p">()</span>
<span class="n">writer</span><span class="o">$</span><span class="nf">SetFileName</span><span class="p">(</span> <span class="n">args[[3]]</span> <span class="p">)</span>
<span class="n">writer</span><span class="o">$</span><span class="nf">Execute</span><span class="p">(</span> <span class="n">image</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-UnVieQ== docutils container">
<div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="nb">require</span> <span class="s1">&#39;simpleitk&#39;</span>

<span class="k">if</span> <span class="no">ARGV</span><span class="o">.</span><span class="n">length</span> <span class="o">!=</span> <span class="mi">3</span> <span class="k">then</span>
  <span class="nb">puts</span> <span class="s2">&quot;Usage: SimpleGaussian &lt;input&gt; &lt;sigma&gt; &lt;output&gt;&quot;</span><span class="p">;</span>
  <span class="nb">exit</span><span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>
<span class="k">end</span>


<span class="c1"># Derive a class from SimpleITK Command class to be used to observe</span>
<span class="c1"># events and report progress.</span>
<span class="c1">## [ruby director command]</span>
<span class="k">class</span> <span class="nc">MyCommand</span> <span class="o">&lt;</span> <span class="no">Simpleitk</span><span class="o">::</span><span class="no">Command</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">po</span><span class="p">)</span>
    <span class="c1"># Explicit call to supoer class initlaizer is required to</span>
    <span class="c1"># initialize the SWIG director class to enable overloaded methods</span>
    <span class="k">super</span><span class="p">()</span>
    <span class="vi">@po</span> <span class="o">=</span> <span class="n">po</span>
  <span class="k">end</span>

  <span class="c1"># The Command method to be executed on the event from the filter.</span>
  <span class="k">def</span> <span class="nf">execute</span>
    <span class="nb">puts</span> <span class="s2">&quot;%s Progress: %0.2f&quot;</span> <span class="o">%</span> <span class="o">[</span><span class="vi">@po</span><span class="o">.</span><span class="n">get_name</span><span class="p">,</span> <span class="vi">@po</span><span class="o">.</span><span class="n">get_progress</span><span class="o">]</span>
  <span class="k">end</span>
<span class="k">end</span>
<span class="c1">## [ruby director command]</span>

<span class="n">reader</span> <span class="o">=</span> <span class="no">Simpleitk</span><span class="o">::</span><span class="no">ImageFileReader</span><span class="o">.</span><span class="n">new</span>
<span class="n">reader</span><span class="o">.</span><span class="n">set_file_name</span><span class="p">(</span> <span class="no">ARGV</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="p">)</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">execute</span>

<span class="n">inputPixelType</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">get_pixel_idvalue</span>


<span class="n">gaussian</span> <span class="o">=</span> <span class="no">Simpleitk</span><span class="o">::</span><span class="no">DiscreteGaussianImageFilter</span><span class="o">.</span><span class="n">new</span>
<span class="n">gaussian</span><span class="o">.</span><span class="n">set_variance</span> <span class="no">ARGV</span><span class="o">[</span><span class="mi">1</span><span class="o">].</span><span class="n">to_f</span>

<span class="c1"># create a new MyCommand class, the references between the objects is</span>
<span class="c1"># automatically taked care of. The connection will automatically be</span>
<span class="c1"># removed when either object is deleted.</span>
<span class="n">cmd</span> <span class="o">=</span> <span class="no">MyCommand</span><span class="o">.</span><span class="n">new</span> <span class="n">gaussian</span>
<span class="n">gaussian</span><span class="o">.</span><span class="n">add_command</span> <span class="no">Simpleitk</span><span class="o">::</span><span class="no">SitkProgressEvent</span><span class="p">,</span> <span class="n">cmd</span>

<span class="n">image</span> <span class="o">=</span> <span class="n">gaussian</span><span class="o">.</span><span class="n">execute</span> <span class="n">image</span>

<span class="n">caster</span> <span class="o">=</span> <span class="no">Simpleitk</span><span class="o">::</span><span class="no">CastImageFilter</span><span class="o">.</span><span class="n">new</span>
<span class="n">caster</span><span class="o">.</span><span class="n">set_output_pixel_type</span> <span class="n">inputPixelType</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">caster</span><span class="o">.</span><span class="n">execute</span> <span class="n">image</span>

<span class="n">writer</span> <span class="o">=</span> <span class="no">Simpleitk</span><span class="o">::</span><span class="no">ImageFileWriter</span><span class="o">.</span><span class="n">new</span>
<span class="n">writer</span><span class="o">.</span><span class="n">set_file_name</span> <span class="no">ARGV</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span>
<span class="n">writer</span><span class="o">.</span><span class="n">execute</span> <span class="n">image</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="link_ImageGridManipulation_docs.html" class="btn btn-neutral float-right" title="Image Grid Manipulation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="link_FastMarchingSegmentation_docs.html" class="btn btn-neutral float-left" title="Fast Marching Segmentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Insight Software Consortium

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>